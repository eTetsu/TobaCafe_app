# TobaCafe_app

## サービス概要
「安く長居できて喫煙もできるカフェ」に特化した検索アプリです。
コーヒー1杯が安価で席数が多く、必ず喫煙スペースがあるカフェだけを厳選して掲載します。
作業や読書で長時間滞在したい喫煙者が、大手グルメサイトでは探しにくい「コスパ良く長居できる喫煙カフェ」を簡単に見つけられます。


## このサービスへの思い・作りたい理由
自宅で作業しようとしても、ついスマホを見てしまったり、ベッドに寝転がってしまったり…気づけば全然集中できていない。
かといって図書館は静かすぎて逆に落ち着かないし、おしゃれなカフェは長居しづらい雰囲気がある。
「適度に人の目があって、程よい雑音があって、コーヒー1杯でまとまった作業できて、しかもタバコが吸える場所」を探すのは本当に大変だった。
大手グルメサイトで「喫煙可」「カフェ」で検索しても多くの選択肢がヒットして、求めている「気軽に長居できる喫煙カフェ」がなかなか見つかりにくい。
このような非常に私的なニーズを根源として、「集中できる作業場所」を探している喫煙者のためのコスパ良く長居できる喫煙カフェだけを集めたアプリの作成を考えるに至った。


## ユーザー層について
ターゲットのユーザー層
喫煙者で、カフェで作業や読書をしたい20〜30代の若い社会人・学生・フリーランス

具体的には以下のような方々を想定しています:
- 予算を抑えたい喫煙者: コーヒー1杯でまとまった時間の滞在がしやすい、コスパの良い場所を求めている方
  - リモートワーカー・フリーランス: 自宅では集中できず、適度な人の目がある環境で作業したい方
  - 資格勉強中の社会人・学生: 図書館は静かすぎて落ち着かず、程よい雑音がある環境を求めている方
  - 読書好きの方: 長時間ゆっくり本を読める場所を探している方

これらのユーザーに共通するのは、「喫煙者である」「静かすぎるとダメ」「ある程度の衆人環視が好ましい」という3つのニーズです。


## サービスの利用イメージ
【利用シーン】
- 作業前の店舗探し: 今日はどこで作業しようかと考えたとき、アプリを開いて現在地周辺の「安く長居できる喫煙カフェ」を検索
- 条件での絞り込み: 価格帯（コーヒー1杯500円以下など）、席数、喫煙環境（喫煙スペース・喫煙席の有無）、エリアで絞り込み
- 店舗詳細の確認: 営業時間、混雑状況、ユーザーレビュー（作業環境の快適さ、実際の滞在時間など）をチェック
- お気に入り登録: 気に入った店舗を保存し、次回以降すぐにアクセス
- 作業場所の慣れ防止: いつもの作業場所で集中できなった場合に、新たな作業場所を提案し、作業場所の慣れを防止

【得られる価値】
- 時間の節約: 大手グルメサイトで「安い」「長居できる」「喫煙可」の3条件を満たす店を探す手間が省ける
- 集中できる環境の確保: 自分の作業スタイルに合った「適度な雑音と人の目がある環境」を確実に見つけられる
- コストパフォーマンス: コーヒー1杯で長時間滞在できる店だけが掲載されているため、経済的負担が少ない
- 安心感: 必ず喫煙スペースがある店だけなので、「行ってみたら喫煙できなかった」という失敗がない


## ユーザーの獲得について
(ゆくゆくの展望として)レビュー投稿時に「Xでシェア」ボタンを設置し、ユーザーが実際に利用した喫煙できるカフェの情報を簡単にSNSで拡散できる仕組みを作ります。
シェアされた投稿には店舗情報とアプリへのリンクが自動で含まれるため、フォロワーが同じニーズを持っていればとアプリへの流入が狙えます。
さらに'「#喫煙カフェ」「#作業カフェ」'などのハッシュタグを活用し、リモートワーカーや喫煙者コミュニティへリーチを広げます。


## サービスの差別化ポイント・推しポイント
既存のグルメサイトでは「価格」「席数」「喫煙可否」の3条件を同時に満たす店舗を探すのにある程度の手間がかかりますが、
本アプリはこれらを満たすカフェだけを掲載することでその検索の手間を大幅に削減します。
特に「コスパ良く長居できる喫煙カフェ」というニッチなニーズを持つユーザーに焦点を当てていることから、狭い検索結果故にユーザーの目的地を瞬時に設定できる点が優れています。
また、大手サイトでは喫煙可否が不明確な店舗も多い中、本アプリは必ず喫煙スペースがある店だけを扱うため「行ってみたら吸えなかった」という失敗をできる限り減らします。
総じて、コスパ重視の若年層喫煙者という明確なターゲット設定により、ニッチながら強いニーズを持つユーザー層に刺さるサービスとなっています。


## 機能候補
以下の()で囲まれた部分は本リリースまでに実装したいこと。

1. カフェ検索・一覧表示機能
  - エリア（都道府県・市区町村）で絞り込み検索
  - 検索結果一覧の表示（店舗名・最寄り駅・コーヒー価格・席数）
  (- 地図表示（Google Maps API連携）)
2. カフェ詳細表示機能
  - 店舗の基本情報表示
  - 店舗名・住所・最寄り駅・営業時間
  - コーヒー価格・席数・喫煙環境（分煙/全面喫煙可）
  (- Wi-Fi有無・電源有無)
  - ユーザーレビューの表示
3. ユーザー登録・ログイン機能
  - メールアドレス・パスワードでのユーザー登録
  - ログイン・ログアウト機能
  - プロフィール表示（ニックネーム程度）
4. レビュー投稿機能
  - 実際に利用したカフェへのレビュー投稿
  - 評価項目: 作業のしやすさ（5段階評価）
  - コメント欄（自由記述）
(5. お気に入り機能
  - カフェをお気に入り登録
  - お気に入り一覧の表示)
(6. 管理者機能
  - カフェ情報の新規登録・編集・削除)
(7.SNSシェア機能
  - レビュー投稿後にX（旧Twitter）でシェアできるボタン
  - シェア時のテンプレート文言・ハッシュタグ自動挿入)

必要最小限のMVPリリースとして、まずは()内を除いた1~4の機能を実装しようと考えています。


## 使用する技術スタック
使用予定Gemの()内で囲まれた機能部分は本リリースに合わせて実装予定。

1. 開発環境: Docker
2. フレームワーク
  Ruby on Rails 7.0系（最新の安定版を使用）
  Ruby 3.2系を使用
  Hotwire（Turbo・Stimulus）を活用し、ページ遷移を高速化
  基本的なCRUD操作はRailsの規約に沿って実装
3. データベース
  PostgreSQL: Renderでの運用実績が豊富で、本番環境との互換性が高い
4. デプロイ先
  Render: 無料枠でPostgreSQLが使用でき、Herokuの代替として安定性が高い。また、自動デプロイ設定が簡単
5. 使用予定のGem（ライブラリ）
  認証・ユーザー管理機能
    - Sorcery（ユーザー登録・ログイン機能）
      メールアドレス・パスワードでの認証
      シンプルで学習コストが低く、必要十分な認証機能を提供
  ページネーション機能
    - kaminari（一覧表示のページ分割）
      カフェ一覧・レビュー一覧で使用
  検索機能
    - Ransack（詳細な絞り込み検索）
      エリア・価格帯・分煙などでの絞り込み
      並び替え機能も簡単に実装可能
  コード品質管理機能
    - RuboCop（コードの静的解析、Lintチェック）
      コードスタイルを統一
      バグの早期発見
  (画像アップロード機能
    - ActiveStorage（Railsの標準機能）
      カフェの写真やユーザーアイコンのアップロード)
  (地図表示機能
    - Google Maps API（JavaScript）
      カフェの位置情報を地図上に表示
      検索結果を地図上にピン表示)
  (住所・位置情報の取得機能
    - Geocoder（住所から緯度経度を取得）
      カフェの住所を登録時に自動で緯度経度に変換
      地図表示や距離計算に使用)
  (環境変数管理機能
    - dotenv-rails（開発環境での環境変数管理）
      Google Maps APIキーなどの秘密情報を安全に管理)


## 機能の実装優先度
  ### MVP（最優先）
  1. ユーザー登録・ログイン機能
  2. カフェ一覧・検索機能
  3. カフェ詳細表示機能
  4. レビュー投稿機能

  ### 本リリース
  5. お気に入り機能
  6. 地図表示機能
  7. 管理者機能

  ### 将来的な拡張
  - SNS連携機能


## 主要なテーブル設計
- users（ユーザー情報）
- boards（カフェ情報）
- reviews（レビュー）
- favorites（お気に入り）※本リリース時


## 画面遷移図
（画像やリンクを追加予定）


## ER図
（画像やリンクを追加予定）


## 開発スケジュール
- 12月29日〜1月31日: 環境構築・基本設計
- 1月1日〜1月10日: MVPの実装（機能1〜4）
- 1月11日〜1月17日: テスト・デプロイ
- 1月18日: MVPリリース


## 非機能要件
- レスポンス時間: 平均2秒以内
- セキュリティ: パスワードのハッシュ化、HTTPS通信
- 対応ブラウザ: Chrome、Safari、Firefox最新版


## 今後の拡張予定（MVP後）
- お気に入り機能
- 地図表示機能
- 管理者機能
- SNS連携（Xでのシェア機能）
